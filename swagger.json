{
  "swagger" : "2.0",
  "info" : {
    "description" : "<p>Документ описывает интеграцию серверной части приложения Московский Транспорт (МТ) и сервисом каршеринга.</p>\n<p>Данный API предстоит реализовать сервису каршеринга.</p>\n<p>Доступ к API каршеринга должен быть ограничен списком разрешённых IP адресов МТ.</p>\n<p>Доступ к API на стороне МТ будет ограничен списком IP адресов каршеринг сервисов, а также уникальным API ключом для каждого каршеринга. Данный API ключ необходимо передавать в HTTP заголовке Api-Key.</p>\n<p>Для работы с API каршеринга, МТ должен получить API токен для каждого пользователя (см. ниже метод POST /token). Токен передаётся в каждый метод в HTTP заголовке User-Token.</p>\n<h2>&#9888; Вопросы на проработку</h2>\n<p>\n  <ol>\n  <li>Согласовать список возможных причин, по которым пользователь не может забронировать текущий автомобиль (поле forbiddenRentReason)</li>\n  <li>Требуется согласовать список возможных ошибок с операторами при брони автомобиля (ErrorRideCreationEntity)</li>\n</ol>\n</p>\n",
    "title" : "MT + сервисы каршеринга"
  },
  "tags" : [ {
    "name" : "carsharing",
    "description" : "API методы реализованные на стороне каршеринг-сервиса"
  }, {
    "name" : "mt",
    "description" : "API методы реализованные на стороне МТ"
  } ],
  "schemes" : [ "https" ],
  "paths" : {
    "/token" : {
      "post" : {
        "tags" : [ "carsharing" ],
        "summary" : "Получение авторизационного токена для работы с API",
        "description" : "<p>Метод принимает номер телефона пользователя, который намеревается начать работу с системой каршеринга. Номер телефона заранее был верифицирован СМС сообщением на стороне МТ.</p>\n<p>Время жизни предоставленного токена - 14 дней, по истечению которых токен необходимо запросить заново.</p>\n<p>При наличии авторизационных систем на стороне каршеринга возможна передача токена, который будет получен из этой системы (например, Яндекс.Паспорта).</p>\n<p>В случае, если на этот номер телефона есть зарегистрированный пользователь и он имеет права на использования сервиса - метод возвращает API токен, который будет использован при обращении к другим методах.</p>\n</p>\n",
        "operationId" : "tokenCreate",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "in" : "body",
          "name" : "body",
          "description" : "Данные для получения токена",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/TokenDto"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Успех операции",
            "schema" : {
              "$ref" : "#/definitions/TokenEntity"
            }
          },
          "400" : {
            "description" : "Ошибка при выдаче токена",
            "schema" : {
              "$ref" : "#/definitions/ErrorTokenCreationEntity"
            }
          }
        }
      }
    },
    "/policy" : {
      "get" : {
        "tags" : [ "carsharing" ],
        "summary" : "Получение текста политики конфиденциальности и правил сервиса",
        "description" : "<p>Метод возвращает текст правил и политики конфиденциальности сервиса, которые пользователь должен принять при работе с сервисом.</p>\n<p>Предусмотрен параметр updatedAt, в котором необходимо передавать дату последнего обновления текста. Данное поле необходимо, чтобы получить повторное согласие пользователя в случае обновления правил.</p>\n",
        "operationId" : "policyGet",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ ],
        "security" : [ { }, {
          "user_token" : [ ]
        } ],
        "responses" : {
          "200" : {
            "description" : "Успех операции",
            "schema" : {
              "$ref" : "#/definitions/PolicyEntity"
            }
          }
        }
      }
    },
    "/car/{id}" : {
      "get" : {
        "tags" : [ "carsharing" ],
        "summary" : "Получение информации об автомобиле",
        "description" : "<p>Метод используется для вывода информации об автомобиле и доступных тарифах для него.</p>\n<p>Метод вызывается в момент открытия пользователем карточки автомобиля.</p>\n<p>Метод может вызываться без передачи авторизационного токена - в этом случае информация\nдолжна возвращаться для неавторизованного пользователя. Для такого пользователя\nдопустимо возвращении стоимости в различном диапазоне (например, стоимость минуты поездки от 7 до 10 рублей).\nДля авторизованного состояния для вывода стоимости будет использована минимальная граница (поле min).\n</p>\n",
        "operationId" : "carGet",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "description" : "ID автомобиля из РНИС",
          "required" : true,
          "type" : "string"
        } ],
        "security" : [ { }, {
          "user_token" : [ ]
        } ],
        "responses" : {
          "401" : {
            "description" : "Переданный токен невалиден. Ошибка возникает в случае если переданный\nтокен пользователя является невалидным (устарел или не существует).\n"
          },
          "200" : {
            "description" : "Успех операции",
            "schema" : {
              "$ref" : "#/definitions/CarEntity"
            }
          }
        }
      }
    },
    "/ride" : {
      "get" : {
        "tags" : [ "carsharing" ],
        "summary" : "Возвращает информацию об активной поездке пользователя",
        "description" : "Метод возвращает сущность активной поездки пользователя. В случае, если поездка не найдена - метод\nвозвращает HTTP код 404.\n",
        "operationId" : "currentRideGet",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ ],
        "security" : [ {
          "user_token" : [ ]
        } ],
        "responses" : {
          "200" : {
            "description" : "Успех операции",
            "schema" : {
              "$ref" : "#/definitions/RideEntity"
            }
          },
          "404" : {
            "description" : "Активная поездка отсутствует"
          },
          "401" : {
            "description" : "Переданный токен невалиден"
          }
        }
      },
      "post" : {
        "tags" : [ "carsharing" ],
        "summary" : "Бронирование автомобиля за пользователем",
        "description" : "<p>Метод брони автомобиля за пользователем.</p>\n<p>В момент создания брони на стороне каршеринг сервиса\nпроисходит холдирование средств за поездку. </p>\n",
        "operationId" : "rideCreate",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "in" : "body",
          "name" : "body",
          "description" : "Данные для бронирования автомобиля",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/RideDto"
          }
        } ],
        "security" : [ {
          "user_token" : [ ]
        } ],
        "responses" : {
          "200" : {
            "description" : "Успех операции",
            "schema" : {
              "$ref" : "#/definitions/RideEntity"
            }
          },
          "400" : {
            "description" : "Ошибка при бронировании",
            "schema" : {
              "$ref" : "#/definitions/ErrorRideCreationEntity"
            }
          },
          "401" : {
            "description" : "Переданный токен невалиден"
          }
        }
      }
    },
    "/ride/{id}" : {
      "get" : {
        "tags" : [ "carsharing" ],
        "summary" : "Получение брони по ID",
        "description" : "Метод возвращает сущность поездки.",
        "operationId" : "rideGet",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "description" : "ID поездки",
          "required" : true,
          "type" : "string"
        } ],
        "security" : [ {
          "user_token" : [ ]
        } ],
        "responses" : {
          "200" : {
            "description" : "Успех операции",
            "schema" : {
              "$ref" : "#/definitions/RideEntity"
            }
          },
          "401" : {
            "description" : "Переданный токен невалиден"
          },
          "404" : {
            "description" : "Поездка с переданным ID не найдена у переданного пользователя"
          }
        }
      }
    },
    "/ride/{id}/cancel" : {
      "post" : {
        "tags" : [ "carsharing" ],
        "summary" : "Отмена брони",
        "operationId" : "rideCancel",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "description" : "ID поездки",
          "required" : true,
          "type" : "string"
        }, {
          "in" : "body",
          "name" : "body",
          "description" : "Данные для отмены брони",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/RideCancelDto"
          }
        } ],
        "security" : [ {
          "user_token" : [ ]
        } ],
        "responses" : {
          "200" : {
            "description" : "Успех операции",
            "schema" : {
              "$ref" : "#/definitions/RideEntity"
            }
          },
          "400" : {
            "description" : "Ошибка при бронировании",
            "schema" : {
              "$ref" : "#/definitions/ErrorRideCancelEntity"
            }
          },
          "401" : {
            "description" : "Переданный токен невалиден"
          },
          "404" : {
            "description" : "Поездка с переданным ID не найдена у переданного пользователя"
          }
        }
      }
    },
    "/zone-set/{id}" : {
      "get" : {
        "tags" : [ "carsharing" ],
        "summary" : "Получение набора зон по ID",
        "description" : "Метод возвращает набор зон, в которых возможно совершить поездку, запрещённые и доступные для завершения аренды.\nВ метод передаётся ID набора зон, который приходит в карточке автомобиля (availableZoneSet.id).\nВызов метода будет происходить в том случае, если информация о наборе зон с таким ID отсутствует в БД МТ, или набор зон был обновлён (параметр availableZoneSet.updatedAt в карточке автомобиля)\n",
        "operationId" : "zoneSetGet",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "name" : "id",
          "in" : "path",
          "description" : "ID набора зон",
          "required" : true,
          "type" : "string"
        } ],
        "security" : [ {
          "user_token" : [ ]
        } ],
        "responses" : {
          "200" : {
            "description" : "Набор зон",
            "schema" : {
              "$ref" : "#/definitions/ZoneSetEntity"
            }
          },
          "404" : {
            "description" : "Набор зон с переданным ID не найден"
          }
        }
      }
    },
    "/ride-info" : {
      "post" : {
        "tags" : [ "mt" ],
        "summary" : "Оповещение об изменениях в поездке",
        "description" : "<p>Метод для оповещения изменении поездки на стороне сервиса каршеринга.</p>\n<p>Адрес метода: <b>POST https://carsharing.moscowtransport.app/ride</b></p>\n<p>Метод вызывается каршеринг-сервисом в момент изменения состояния поездки:\n  <ul>\n    <li>отмена поездки пользователем в приложении каршеринга;</li>\n    <li>начало поездки;</li>\n    <li>завершение поездки;</li>\n    <li>найден штраф по поездке;</li>\n    <li>оплачен штраф по поездке;</li>\n    <li>перевод автомобиля в режим ожидания.</li>\n  </ul>\n</p>\n",
        "operationId" : "rideNotification",
        "consumes" : [ "application/json" ],
        "produces" : [ "application/json" ],
        "parameters" : [ {
          "in" : "body",
          "name" : "body",
          "description" : "Данные поездки",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/RideEntity"
          }
        } ],
        "deprecated" : true,
        "responses" : {
          "200" : {
            "description" : "Успех операции"
          }
        }
      }
    }
  },
  "securityDefinitions" : {
    "user_token" : {
      "description" : "Токен пользователя, полученный в рамках вызова метода POST /token",
      "type" : "apiKey",
      "name" : "UserToken",
      "in" : "header"
    }
  },
  "definitions" : {
    "TokenDto" : {
      "type" : "object",
      "properties" : {
        "phoneNum" : {
          "type" : "integer",
          "description" : "Номер телефона в формате <i>70000000000</i> (только цифры)"
        }
      }
    },
    "RideDto" : {
      "type" : "object",
      "properties" : {
        "carId" : {
          "type" : "string",
          "description" : "ID автомобиля"
        },
        "offerId" : {
          "type" : "string",
          "description" : "ID тарифа"
        },
        "policyVersion" : {
          "type" : "string",
          "description" : "Версия оферты, которая принята у пользователя на стороне МТ. Поле может быть null, если схема работы оператора не предполагает принятия оферты (конфигурируется на стороне МТ для каждого оператора)."
        },
        "userLocation" : {
          "description" : "Позиция пользователя в момент оформления заказа",
          "$ref" : "#/definitions/LocationDto"
        }
      }
    },
    "RideCancelDto" : {
      "type" : "object",
      "properties" : {
        "userLocation" : {
          "$ref" : "#/definitions/LocationDto"
        }
      }
    },
    "RideEntity" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string",
          "description" : "ID поездки"
        },
        "deepLink" : {
          "type" : "string",
          "description" : "Диплинк для перехода в приложение каршеринг сервиса"
        },
        "specialMessage" : {
          "type" : "string",
          "description" : "Сообщение, которое можно вывести в карточке автомобиля при необходимости"
        },
        "finesDescription" : {
          "type" : "string"
        },
        "car" : {
          "description" : "Информация об автомобиле",
          "$ref" : "#/definitions/RideCarEntity"
        },
        "waiting" : {
          "description" : "Информация о времени ожидания",
          "$ref" : "#/definitions/RideWaitingInfoEntity"
        },
        "offer" : {
          "description" : "Информация о используемом тарифе в рамках этой брони",
          "$ref" : "#/definitions/RideOfferEntity"
        },
        "pointStart" : {
          "description" : "Точка старта поездки (откуда поездка была начата - по сути является точкой автомобиля при брони)",
          "$ref" : "#/definitions/LocationEntity"
        },
        "pointFinish" : {
          "description" : "Точка завершения поездки",
          "$ref" : "#/definitions/LocationEntity"
        },
        "createdAt" : {
          "type" : "integer",
          "example" : 1637917148,
          "description" : "Время создания брони в формате timestamp (секунды)"
        },
        "startedAt" : {
          "type" : "integer",
          "example" : 1637917148,
          "description" : "Время старта поездки (пользователь осмотрел автомобиль и начал аренду) в формате timestamp (секунды)"
        },
        "canceledAt" : {
          "type" : "integer",
          "example" : 1637917148,
          "description" : "Время отмены брони в формате timestamp (секунды)"
        },
        "finishedAt" : {
          "type" : "integer",
          "example" : 1637917148,
          "description" : "Время завершения поездки в формате timestamp (секунды)"
        },
        "features" : {
          "$ref" : "#/definitions/RideFeaturesEntity"
        },
        "distance" : {
          "type" : "number",
          "example" : 120.0,
          "description" : "Дистанция в метрах, которую проехал пользователь в рамках поездки"
        },
        "price" : {
          "$ref" : "#/definitions/RidePriceEntity"
        },
        "status" : {
          "type" : "string",
          "description" : "Статус поездки",
          "enum" : [ "active", "waiting", "finished", "canceled", "inspection" ]
        }
      }
    },
    "RidePriceEntity" : {
      "type" : "object",
      "properties" : {
        "parkingTime" : {
          "type" : "number",
          "example" : 180.0,
          "description" : "Длительность ожидания в секундах"
        },
        "parkingPrice" : {
          "type" : "number",
          "example" : 799.0,
          "description" : "Стоимость за ожидание в копейках"
        },
        "ridingPrice" : {
          "type" : "number",
          "example" : 799.0,
          "description" : "Итоговая стоимость поездки в копейках"
        }
      }
    },
    "RideCarEntity" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string"
        },
        "fuelCapacity" : {
          "$ref" : "#/definitions/FuelCapacity"
        },
        "position" : {
          "$ref" : "#/definitions/LocationEntity"
        },
        "number" : {
          "type" : "string",
          "example" : "у522уу799",
          "description" : "Гос. номер автомобиля"
        },
        "model" : {
          "type" : "string",
          "example" : "BMW 3-series",
          "description" : "Марка + модель автомобиля"
        }
      }
    },
    "RideFeaturesEntity" : {
      "type" : "object",
      "properties" : {
        "warmup" : {
          "type" : "boolean",
          "description" : "Доступна возможность удалённого прогрева автомобиля"
        },
        "wink" : {
          "type" : "boolean",
          "description" : "Доступна возможность удалённо «помигать» автомобилем"
        }
      }
    },
    "RideWaitingInfoEntity" : {
      "type" : "object",
      "properties" : {
        "freeUntil" : {
          "type" : "integer",
          "description" : "Время в формате timestamp (секунды) до которого время ожидания является бесплатным"
        },
        "pricePerMin" : {
          "type" : "number",
          "example" : 255.0,
          "description" : "Стоимость минуты ожидания в копейках"
        }
      }
    },
    "TokenEntity" : {
      "type" : "object",
      "properties" : {
        "token" : {
          "type" : "string",
          "description" : "16 символьный уникальный токен для пользователя."
        },
        "validUntil" : {
          "type" : "integer",
          "example" : 1637907497,
          "description" : "Дата в формате timestamp, до которой токен будет валидный (секунды)"
        }
      },
      "description" : "Токен конкретного пользователя для работы с API методами.\n"
    },
    "PolicyEntity" : {
      "type" : "object",
      "properties" : {
        "content" : {
          "type" : "string",
          "description" : "Текст правил сервиса и политики конфиденциальности: h1, p, strong, img\n"
        },
        "version" : {
          "type" : "string",
          "description" : "Версия оферты"
        }
      }
    },
    "FuelCapacity" : {
      "type" : "object",
      "properties" : {
        "value" : {
          "type" : "number",
          "example" : 12.4,
          "description" : "Доступный уровень топлива для автомобиля в километрах или %"
        },
        "type" : {
          "type" : "string",
          "enum" : [ "km", "percent" ]
        }
      }
    },
    "CarEntity" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string"
        },
        "fuelCapacity" : {
          "$ref" : "#/definitions/FuelCapacity"
        },
        "carNum" : {
          "type" : "string",
          "example" : "у522уу799",
          "description" : "Гос. номер автомобиля"
        },
        "prePaymentInformation" : {
          "type" : "string",
          "description" : "Информация для пользователя о списания за поездку. Здесь можно передать информацию о бонусном списании или другую вспомогательную информации об оплате за поездку на этом автомобиле."
        },
        "model" : {
          "type" : "string",
          "example" : "BMW 3-series",
          "description" : "Марка + модель автомобиля"
        },
        "availableZoneSet" : {
          "$ref" : "#/definitions/AvailableZoneSetEntity"
        },
        "location" : {
          "$ref" : "#/definitions/LocationEntity"
        },
        "insurancePolicy" : {
          "$ref" : "#/definitions/CarInsurancePolicyEntity"
        },
        "forbiddenRentReason" : {
          "type" : "string",
          "description" : "Код причины, по которой пользователю может быть недоступен этот автомобиль.\nВ случае, если автомобиль доступен для текущего пользователя значение поля\nследует оставить в null (или пользователь неавторизован). Возможные коды ошибок:\n<i>lowDriverExperience</i> - низкий стаж вождения\n<i>lowServiceExperience</i> - низкий уровень доверия в сервисе\n<i>carAlreadyBooked</i> - автомобиль уже забронирован другим пользователем\n<i>userDebt</i> - автомобиль уже забронирован другим пользователем\n<i>other</i> - другие причины\n",
          "enum" : [ "lowDriverExperience", "lowServiceExperience", "carAlreadyBooked", "userDebt", "other" ]
        },
        "offer" : {
          "type" : "array",
          "description" : "Доступные тарифы для автомобиля",
          "items" : {
            "$ref" : "#/definitions/OfferRangeEntity"
          }
        }
      }
    },
    "CarInsurancePolicyEntity" : {
      "properties" : {
        "description" : {
          "type" : "string",
          "description" : "Текстовая информация, которая выводится для пользователя в поле с описанием страховки"
        }
      }
    },
    "AvailableZoneSetEntity" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string",
          "description" : "ID набора зон"
        },
        "updatedAt" : {
          "type" : "integer",
          "example" : 1637907497,
          "description" : "Дата изменения набора данных в timestamp (секунды)"
        }
      }
    },
    "RideOfferEntity" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string"
        },
        "description" : {
          "type" : "string",
          "description" : "Подробное описание тарифа с поддержкой html тегов: h1, p, strong, img\n"
        },
        "name" : {
          "type" : "string",
          "example" : "Поминутный",
          "description" : "Название тарифа"
        },
        "usagePrice" : {
          "type" : "number",
          "example" : 10055.0,
          "description" : "Стоимость посадки в копейках"
        },
        "holdAmount" : {
          "type" : "number",
          "example" : 20255.0,
          "description" : "Сумма предсписания в копейках"
        },
        "parkingSumPerMin" : {
          "type" : "number",
          "example" : 10055.0,
          "description" : "Стоимость тарифа для режима ожидания в копейках"
        },
        "ridingSumPerMin" : {
          "type" : "number",
          "example" : 10055.0,
          "description" : "Стоимость тарифа для режима поездки в копейках"
        },
        "freeWaitingTime" : {
          "type" : "integer",
          "description" : "Время бесплатного ожидания в минутах. Если бесплатного времени ожидания не предусмотрено, следует пустое значение (null)."
        }
      },
      "description" : "<p>Описание тарифа пользования автомобилем. В случае, если пользозователь неавторизован, есть возможность\nпередавать стоимость в диапазоне от...до (см. поля min/max в сущности OfferRangeEntity). </p>\n<p>Для авторизованного пользователя в поля min/max следует передавать одинаковую стоимость.</p>\n"
    },
    "OfferRangeEntity" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "type" : "string"
        },
        "description" : {
          "type" : "string",
          "description" : "Подробное описание тарифа с поддержкой html тегов: h1, p, strong, img\n"
        },
        "name" : {
          "type" : "string",
          "example" : "Поминутный",
          "description" : "Название тарифа"
        },
        "usagePrice" : {
          "type" : "number",
          "example" : 10055.0,
          "description" : "Стоимость посадки в копейках"
        },
        "holdAmount" : {
          "type" : "number",
          "example" : 20255.0,
          "description" : "Сумма предсписания в копейках"
        },
        "offerParking" : {
          "description" : "Стоимость тарифа для режима ожидания",
          "$ref" : "#/definitions/OfferRangePriceEntity"
        },
        "offerRiding" : {
          "description" : "Стоимость тарифа для режима поездки",
          "$ref" : "#/definitions/OfferRangePriceEntity"
        },
        "freeWaitingTime" : {
          "type" : "integer",
          "description" : "Время бесплатного ожидания в минутах. Если бесплатного времени ожидания не предусмотрено, следует пустое значение (null)."
        },
        "validUntil" : {
          "type" : "number",
          "description" : "Время в timestamp (секунды), до которого дейсвителен это предложение"
        }
      },
      "description" : "<p>Описание тарифа пользования автомобилем. В случае, если пользозователь неавторизован, есть возможность\nпередавать стоимость в диапазоне от...до (см. поля min/max в сущности OfferRangeEntity). </p>\n<p>Для авторизованного пользователя в поля min/max следует передавать одинаковую стоимость.</p>\n"
    },
    "OfferRangePriceEntity" : {
      "type" : "object",
      "properties" : {
        "min" : {
          "type" : "number",
          "example" : 799.0,
          "description" : "Минимальная стоимость в копейках"
        },
        "max" : {
          "type" : "number",
          "example" : 1099.0,
          "description" : "Максимальная стоимость в копейках"
        }
      }
    },
    "ZoneSetEntity" : {
      "type" : "object",
      "properties" : {
        "id" : {
          "description" : "ID набора зон"
        },
        "availableForDriving" : {
          "type" : "object",
          "description" : "Геозона (полигон в формате GeoJSON) поездки - зона, в рамках которой можно совершать поездку",
          "properties" : { }
        },
        "forbiddenComplete" : {
          "type" : "array",
          "description" : "Коллекция зон, где запрещено завершать аренду (но можно перевести в режим ожидания)",
          "items" : {
            "$ref" : "#/definitions/ZoneEntity"
          }
        },
        "allowComplete" : {
          "type" : "array",
          "description" : "Коллекция зон, где можно переводить в режим ожидания и завершать аренду",
          "items" : {
            "$ref" : "#/definitions/ZoneEntity"
          }
        }
      }
    },
    "ZoneEntity" : {
      "type" : "object",
      "properties" : {
        "polyline" : {
          "type" : "object",
          "description" : "Геозона (полигон в формате GeoJSON)",
          "properties" : { }
        },
        "shortDescription" : {
          "type" : "string",
          "example" : "Если поездка выйдет дешевле 1170Р, с карты дополнительно спишется недостающая разница"
        },
        "description" : {
          "type" : "string",
          "example" : "Подробное описание зоны с поддержкой зоны h1, p, strong, img"
        },
        "name" : {
          "type" : "string",
          "example" : "SVO, 1134Р"
        },
        "mapLabel" : {
          "type" : "string",
          "example" : "SVO"
        }
      }
    },
    "LocationDto" : {
      "type" : "object",
      "properties" : {
        "lat" : {
          "type" : "number",
          "example" : 55.747534,
          "description" : "Широта"
        },
        "lon" : {
          "type" : "number",
          "example" : 37.62603,
          "description" : "Долгота"
        }
      }
    },
    "LocationEntity" : {
      "type" : "object",
      "properties" : {
        "address" : {
          "type" : "string",
          "example" : "Москва, ул. Тверская, д. 13"
        },
        "lat" : {
          "type" : "number",
          "example" : 55.747534,
          "description" : "Широта"
        },
        "lon" : {
          "type" : "number",
          "example" : 37.62603,
          "description" : "Долгота"
        }
      }
    },
    "ErrorRideCreationEntity" : {
      "type" : "object",
      "properties" : {
        "errorCode" : {
          "type" : "string",
          "description" : "Код ошибки при бронировании автомобиля. Коды ошибок:\n<ul>\n  <li>carNotFound - передан некорректный ID автомобиля;</li>\n  <li>carAlreadyBooked - машина уже забронирована другим пользователем;</li>\n  <li>userHasRide - у пользователя уже есть активная поездка или бронь;</li>\n  <li>depricatedPolicy - принятая пользователем оферта устарела;</li>\n  <li>userDebt - у пользователя есть задолженность;</li>\n  <li>userBlocked - пользователь заблокирован;</li>\n  <li>carNotAvailable - автомобиль недоступен для этого пользователя;</li>\n  <li>paymentError - ошибка при проведении оплаты;</li>\n  <li>invalidOffer - передан неверный или просроченный тариф;</li>\n  <li>other - другая ошибка, которую на данный момент не поддерживает логика МТ.</li>\n</ul>\n",
          "enum" : [ "carNotFound", "carAlreadyBooked", "carNotAvailable", "userHasRide", "depricatedPolicy", "userBlocked", "userDebt", "paymentError", "other" ]
        }
      }
    },
    "ErrorTokenCreationEntity" : {
      "type" : "object",
      "properties" : {
        "errorCode" : {
          "type" : "string",
          "description" : "Код ошибки при бронировании автомобиля. Коды ошибок:\n<ul>\n<li>Пользователь не зарегистрирован в системе (код ошибки userNotFound)</li>\n<li>Пользователь не завершил процедуру регистрации (код ошибки registrationNotComplited). Например: не добавлена банковская карта, не завершена процедура верификации, требуются другие действия для завершения регистрации в мобильном приложении</li>\n<li>Пользователь заблокирован (код ошибки blocked)</li>\n<li>Другая причина (код ошибки other)</li>\n</ul>\n",
          "enum" : [ "userNotFound", "registrationNotComplited", "blocked", "other" ]
        }
      }
    },
    "ErrorRideCancelEntity" : {
      "type" : "object",
      "properties" : {
        "errorCode" : {
          "type" : "string",
          "description" : "Код ошибки при бронировании автомобиля. Коды ошибок:\n<ul>\n  <li>rideNotFound - поездка с переданным ID не найдена;</li>\n  <li>rideAlreadyCanceled - поездка с переданным ID уже отменена;</li>\n  <li>rideInProgress - поездку нельзя отменить, т.к. поездка в данный момент активна</li>\n</ul>\n",
          "enum" : [ "rideNotFound", "rideAlreadyCanceled", "rideInProgress" ]
        }
      }
    },
    "ErrorEntity" : {
      "type" : "object",
      "properties" : {
        "errorCode" : {
          "type" : "string"
        }
      }
    }
  }
}